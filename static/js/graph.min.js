function draw(){function e(i,e){return e/prices.length*i}var t=Snap("#svg"),r=(prices.length,[]),a=[],s=[],n={};for(i=1;i<prices.length;i++){var o=e(i,chartW),c=prices[i];n.x=Math.floor(o),n.y=c;var l=i-1,h=e(l,chartW),p=prices[l];n.prevX=Math.floor(h),n.prevY=p,0!==n.prevX&&0!==n.prevY||(n.prevX=-15,n.prevY=chartH-15),r[i]=" M"+n.prevX+","+n.prevY+" L"+n.x+","+n.y;a[i]=n.x,s[i]=n.y}for(i=0;i<r.length;i++){var d=t.path(r[i]),f=d.getTotalLength();d.attr({"stroke-dasharray":f,"stroke-dashoffset":f,stroke:"#e2112e","stroke-linecap":"round","stroke-width":1,"stroke-linejoin":"round",id:"myLine"+i,"class":"line"})}for(i=0;i<r.length;i++){var g=t.circle(a[i],s[i],5);g.attr({fill:"#e2112e",stroke:"#e2112e","stroke-width":2,id:"myCirc"+i,"class":"breakpoint"})}var k=t.path("M0,"+chartH+"L"+chartW+","+chartH),v=t.path("M0,"+chartH+"L0,0"),m=(k.getTotalLength(),v.getTotalLength(),250*prices.length+"ms");console.log(m),$("#yAxis").css({"-webkit-transition-delay":m,"-webkit-transition":"all 200ms ease-in"}),$("#xAxis").css({"-webkit-transition-delay":m,"-webkit-transition":"all 200ms ease-in"}),$("#xAxis").animate({"stroke-dashoffset":"0"}),$("#yAxis").animate({"stroke-dashoffset":"0"})}function animate(){for(i=0;i<prices.length;i++){var e=$("#myCirc"+i),t=$("#myLine"+i);e.css({"-webkit-transition":"all 550ms cubic-bezier(.84,0,.2,1)","-webkit-transition-delay":375+125*i+"ms"}),t.css({"-webkit-transition":"all 250ms cubic-bezier(.84,0,.2,1)","-webkit-transition-delay":125*i+"ms"}),t.animate({"stroke-dashoffset":0}),e.css({transform:"scale(1)"})}}var price=[0,-95,-30,-65,-35,-215],chartH=$("#svg").height(),chartW=$("#svg").width(),prices=[];for(i=0;i<price.length;i++)prices[i]=price[i]+$("#svg").height();$(window).load(function(){draw(),animate()}),$("#draw").on("click",function(){$("#svg").empty(),draw(),animate()});